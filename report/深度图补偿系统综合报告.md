# 深度图补偿系统综合报告

> 本报告汇总深度图补偿系统的核心内容，仅保留关键信息。

---

## 1. 系统概述

**目标**：校正深度相机的非线性测量误差，提高测量精度

| 指标               | 补偿前 | 补偿后  | 改善            |
| ------------------ | ------ | ------- | --------------- |
| **线性度**   | 0.44%  | 0.017%  | **96%↑** |
| **最大偏差** | 0.19mm | 0.007mm | **96%↑** |

---

## 2. 推荐补偿算法

### 2.1 最佳方案：2D多项式(3×3)

| 指标     | 值       |
| -------- | -------- |
| 线性度   | 0.0166%  |
| 参数量   | 20个     |
| 存储大小 | 0.45KB   |
| 处理速度 | ~50ms/张 |

**公式**：`actual = Σᵢⱼ cᵢⱼ × xⁱ × zʲ` (i,j ∈ {0,1,2,3})

### 2.2 方法对比

| 方法                     | 线性度  | 参数量 | 泛化能力 |
| ------------------------ | ------- | ------ | -------- |
| **2D多项式(3×3)** | 0.017%  | 20     | ✅ 优秀  |
| 2D多项式(2×2)           | 0.018%  | 13     | ✅ 优秀  |
| 分区域(8区)              | 0.020%  | 32     | ✅ 良好  |
| 三次样条                 | 0.0019% | 93     | ✅ 优秀  |

---

## 3. 三次样条模型

若使用传统1D样条补偿，模型结构如下：

```json
{
  "knots": [46个节点],
  "coefficients": [46个系数],
  "k": 3,
  "x_range": [-24.10, 17.55],  // 输入(测量值)
  "y_range": [1.00, 42.00]     // 输出(实际值)
}
```

**补偿流程**：

```
像素值 → 转毫米 → 样条插值 → 转像素值
```

---

## 4. 补偿方法存储对比

| 方法                | 存储大小        | 精度 | 推荐场景         |
| ------------------- | --------------- | ---- | ---------------- |
| 三次样条            | ~1500B          | 极高 | PC高精度         |
| **3阶多项式** | **~100B** | 中高 | **嵌入式** |
| 查找表+插值         | ~800B           | 高   | 实时处理         |

**存储减少93%**：三次样条→3阶多项式

---

## 5. 畸变分析

### 5.1 畸变来源

| 类型                     | 影响     | 校正方法           |
| ------------------------ | -------- | ------------------ |
| 镜头畸变(k1,k2,P1,P2,k3) | XY位置   | 相机内部           |
| **深度非线性**     | Z值      | **2D多项式** |
| 传感器倾斜(τx=-0.22)    | 弧形畸变 | 2D多项式隐式包含   |

### 5.2 补偿效果可视化

**补偿前**：边缘偏差明显（弧形分布），偏差±0.05mm
**补偿后**：偏差趋近于零，分布均匀

---

## 6. 线性外推

当测量值超出模型范围时：

| 参数         | 推荐值   |
| ------------ | -------- |
| 最大外推距离 | 2.0mm    |
| 输出范围     | 0~43mm   |
| 斜率计算     | 边界导数 |

---

## 7. 传感器对比

| 传感器            | X轴线性度         | Z轴线性度         |
| ----------------- | ----------------- | ----------------- |
| JY                | 0.0104%           | 0.0019%           |
| **KEYENCE** | **0.0038%** | **0.0012%** |

KEYENCE线性度优于JY约2.7倍

---

## 8. 关键结论

### ✅ 推荐配置

1. **算法**：2D多项式(3×3) 或三次样条- 精度高、泛化好
2. **存储优化**：3阶多项式减少93%存储
3. **滤波**：启用3σ+中值+高斯
4. **外推**：启用，限制2mm

---

*生成时间：2025年12月*
