## 1. 项目基础架构搭建

- [ ] 1.1 创建 `cpp_interface/` 目录结构
- [ ] 1.2 配置 CMake 构建系统
- [ ] 1.3 集成 Google Test 单元测试框架
- [ ] 1.4 集成 nlohmann/json 库
- [ ] 1.5 配置编译器选项（C++20, -O3）
- [ ] 1.6 设置 CI/CD 流水线（Windows/Linux/macOS）

## 2. 核心算法：三次样条插值

- [ ] 2.1 实现 `CubicSpline` 类基础结构
- [ ] 2.2 实现样条拟合算法（splrep）
- [ ] 2.3 实现样条评估算法（splev）
- [ ] 2.4 实现导数计算（用于外推）
- [ ] 2.5 添加单元测试（vs Python scipy结果）
- [ ] 2.6 性能基准测试
- [ ] 2.7 边界条件测试（数据不足、重复值）

## 3. 数据模型定义

- [ ] 3.1 实现 `CompensationModel` 类
- [ ] 3.2 实现 `CalibrationResult` 类
- [ ] 3.3 实现 `LinearityResult` 类
- [ ] 3.4 实现 `RepeatabilityResult` 类
- [ ] 3.5 实现配置类（FilterConfig, ROIConfig, 等）
- [ ] 3.6 实现 JSON 序列化/反序列化
- [ ] 3.7 添加单元测试

## 4. 补偿服务实现

- [ ] 4.1 实现 `CompensationService` 类
- [ ] 4.2 实现模型加载/保存
- [ ] 4.3 实现单值补偿
- [ ] 4.4 实现批量补偿（std::vector）
- [ ] 4.5 实现外推功能
- [ ] 4.6 实现归一化功能
- [ ] 4.7 实现补偿统计信息
- [ ] 4.8 添加单元测试（对比Python结果）
- [ ] 4.9 性能测试（确保 < 1μs）

## 5. 标定服务实现

- [ ] 5.1 实现 `CalibrationService` 类
- [ ] 5.2 实现数据验证（至少4个点）
- [ ] 5.3 实现模型构建逻辑
- [ ] 5.4 实现动态阶数调整
- [ ] 5.5 实现进度回调机制
- [ ] 5.6 添加单元测试
- [ ] 5.7 对比Python标定结果

## 6. 线性度服务实现

- [ ] 6.1 实现 `LinearityService` 类
- [ ] 6.2 实现 BFSL 算法
- [ ] 6.3 实现零点归一化
- [ ] 6.4 实现线性拟合（最小二乘）
- [ ] 6.5 实现补偿效果评估
- [ ] 6.6 实现所有指标计算（RMS, MAE, R²）
- [ ] 6.7 添加单元测试
- [ ] 6.8 对比Python计算结果

## 7. 重复精度服务实现

- [ ] 7.1 实现 `RepeatabilityService` 类
- [ ] 7.2 实现标准差计算
- [ ] 7.3 实现重复精度指标（±3σ, 6σ, 极差）
- [ ] 7.4 实现图像内平均标准差
- [ ] 7.5 添加单元测试
- [ ] 7.6 对比Python计算结果

## 8. 深度转换工具

- [ ] 8.1 实现 `gray_to_mm` 函数
- [ ] 8.2 实现 `mm_to_gray` 函数
- [ ] 8.3 实现批量转换（向量化）
- [ ] 8.4 使用 constexpr 优化
- [ ] 8.5 添加单元测试

## 9. 错误处理

- [ ] 9.1 定义异常类层次结构
- [ ] 9.2 实现错误码枚举
- [ ] 9.3 实现错误消息格式化
- [ ] 9.4 添加异常安全测试

## 10. Qt 集成支持

- [ ] 10.1 实现 `QtCompensationService` 封装
- [ ] 10.2 实现 `QtCalibrationService` 封装
- [ ] 10.3 实现信号/槽机制
- [ ] 10.4 实现类型转换工具（QVector <-> std::vector）
- [ ] 10.5 创建 Qt 示例项目
- [ ] 10.6 创建 Qt 集成文档

## 11. 示例和文档

- [ ] 11.1 创建基础补偿示例（basic_compensation.cpp）
- [ ] 11.2 创建标定流程示例（calibration_flow.cpp）
- [ ] 11.3 创建 Qt 集成示例（qt_integration.cpp）
- [ ] 11.4 编写 API 文档（Doxygen）
- [ ] 11.5 编写用户指南（Getting Started）
- [ ] 11.6 编写集成指南（CMake集成）
- [ ] 11.7 编写性能调优指南

## 12. 测试和验证

- [ ] 12.1 完整单元测试覆盖（> 90%）
- [ ] 12.2 集成测试（完整流程）
- [ ] 12.3 回归测试（vs Python结果）
- [ ] 12.4 性能基准测试
- [ ] 12.5 内存泄漏检测（Valgrind/ASan）
- [ ] 12.6 多平台测试（Windows/Linux/macOS）
- [ ] 12.7 多编译器测试（GCC/Clang/MSVC）

## 13. 性能优化

- [ ] 13.1 Profile 热点代码
- [ ] 13.2 优化样条评估性能
- [ ] 13.3 优化批量补偿性能
- [ ] 13.4 考虑 SIMD 优化（可选）
- [ ] 13.5 考虑并行化（std::execution）
- [ ] 13.6 验证单次补偿 < 1μs

## 14. 构建和打包

- [ ] 14.1 配置 CMake install 规则
- [ ] 14.2 创建 pkg-config 文件
- [ ] 14.3 创建 CMake Find 模块
- [ ] 14.4 支持 vcpkg 包管理器
- [ ] 14.5 支持 conan 包管理器
- [ ] 14.6 创建发布脚本

## 15. 规格更新

- [ ] 15.1 创建 `cpp-interface/spec.md`
- [ ] 15.2 更新 `project.md`（添加C++技术栈）
- [ ] 15.3 运行 `openspec validate --strict`
- [ ] 15.4 修复验证错误

## 16. 发布准备

- [ ] 16.1 版本号确定（v1.0.0）
- [ ] 16.2 CHANGELOG 编写
- [ ] 16.3 许可证文件
- [ ] 16.4 README.md
- [ ] 16.5 发布公告
- [ ] 16.6 Git tag 和发布
